# üîó Lazada URL Parser

‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ URL ‡∏Ç‡∏≠‡∏á Lazada ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product ID) ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏±‡πâ‡∏ô

## üìã ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥

- ‚úÖ ‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ URL ‡∏Ç‡∏≠‡∏á Lazada ‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
- ‚úÖ ‡∏î‡∏∂‡∏á‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product ID) ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏±‡πâ‡∏ô: `https://www.lazada.co.th/i{productId}.html`
- ‚úÖ **‡∏¢‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå Lazada ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ API** ‡∏Ç‡∏≠‡∏á [getlink-lazada.lslly.com](https://getlink-lazada.lslly.com)
- ‚úÖ **‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£** (‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ + ‡∏¢‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå) ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö URL ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
- ‚úÖ ‡∏°‡∏µ User Interface ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
- ‚úÖ **REST API** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô HTTP
- ‚úÖ **GET endpoint** ‡∏£‡∏±‡∏ö URL ‡∏ú‡πà‡∏≤‡∏ô query parameter
- ‚úÖ **Docker support** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö deployment

## üöÄ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå HTML (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `test-lazada-parser.html` ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå:

```bash
open test-lazada-parser.html
```

‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏±‡∏ö‡πÄ‡∏ö‡∏¥‡∏•‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå

### 2. ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå JavaScript

```javascript
// Import ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
const { extractLazadaProductId, convertLazadaUrl } = require('./lazada-url-parser.js');

// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á URL
const originalUrl = "https://www.lazada.co.th/products/y2k-knitted-v-neck-mini-vest-fashion-spice-girl-top-slim-outerwear-beautiful-back-vest-korean-style-tee-i5595454212-s23809696215.html?pvid=a2714864-4aa2-4f38-a7b6-7a46bd5216d6&search=jfy&scm=1007.17519.386432.0&priceCompare=skuId%3A23809696215%3Bsource%3Atpp-recommend-plugin-32104%3Bsn%3Aa2714864-4aa2-4f38-a7b6-7a46bd5216d6%3BoriginPrice%3A950%3BdisplayPrice%3A950%3BsinglePromotionId%3A900000059430833%3BsingleToolCode%3ApromPrice%3BvoucherPricePlugin%3A0%3Btimestamp%3A1753414702744&spm=a2o4m.homepage.just4u.d_5595454212";

// ‡πÅ‡∏õ‡∏•‡∏á URL
const newUrl = convertLazadaUrl(originalUrl);
console.log('URL ‡πÉ‡∏´‡∏°‡πà:', newUrl);
```

### 3. ‡πÉ‡∏ä‡πâ REST API

#### ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô API

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
npm install

# ‡∏£‡∏±‡∏ô API server
npm start
```

API ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà `http://localhost:3000`

#### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô API

**GET /process?url=...** - ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• URL ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£ (‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ + ‡∏¢‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå)

```bash
curl "http://localhost:3000/process?url=https://www.lazada.co.th/products/..."
```

‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå:
```
http://localhost:3000/process?url=https://www.lazada.co.th/products/20000mah-i5775550818-s24586668571.html?pvid=df21ad6b-f05d-4b7d-a676-84072f2caa0f&search=jfy&scm=1007.17519.386432.0&priceCompare=skuId%3A24586668571%3Bsource%3Atpp-recommend-plugin-32104%3Bsn%3Adf21ad6b-f05d-4b7d-a676-84072f2caa0f%3BoriginPrice%3A6900%3BdisplayPrice%3A6900%3BsinglePromotionId%3A-1%3BsingleToolCode%3AmockedSalePrice%3BvoucherPricePlugin%3A0%3Btimestamp%3A1754445296429&spm=a2o4m.homepage.just4u.d_5775550818
```

**POST /process** - ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• URL ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£ (‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ + ‡∏¢‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå)

```bash
curl -X POST http://localhost:3000/process \
  -H "Content-Type: application/json" \
  -d '{"url":"https://www.lazada.co.th/products/..."}'
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Response:**

```json
{
  "success": true,
  "originalUrl": "https://www.lazada.co.th/products/20000mah-i5775550818-s24586668571.html?pvid=df21ad6b-f05d-4b7d-a676-84072f2caa0f",
  "productId": "5775550818",
  "cleanUrl": "https://www.lazada.co.th/i5775550818.html",
  "shortenedUrl": "https://s.lazada.co.th/s.BnVFt?cc",
  "timestamp": "2025-08-06T01:58:13.661Z",
  "error": null
}
```

**GET /** - ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• API

```bash
curl http://localhost:3000/
```

## üöÄ Deployment

### CapRover Deployment

1. **‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ü‡∏•‡πå:**
   - `captain-definition` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ CapRover
   - `Dockerfile` - ‡∏™‡∏£‡πâ‡∏≤‡∏á Docker image
   - `.dockerignore` - ‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

2. **Push ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ:**
   ```bash
   git add .
   git commit -m "Add CapRover deployment files"
   git push origin master
   ```

3. **Deploy ‡∏ö‡∏ô CapRover:**
   - ‡πÄ‡∏Ç‡πâ‡∏≤ CapRover dashboard
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á app ‡πÉ‡∏´‡∏°‡πà
   - Connect ‡∏Å‡∏±‡∏ö Git repository
   - Deploy

### Environment Variables

‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ environment variables ‡πÉ‡∏ô CapRover:

```env
LAZADA_SHORTEN_API_URL=https://getlink-lazada.lslly.com/api/v1
PORT=3000
```

## üìö API Reference

### ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô JavaScript

#### `extractLazadaProductId(url)`
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏∂‡∏á‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å URL ‡∏Ç‡∏≠‡∏á Lazada
- **‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå:** `url` (string) - URL ‡∏Ç‡∏≠‡∏á Lazada
- **‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô:** `string` - ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠ `null` ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏ö

#### `createLazadaUrl(productId)`
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
- **‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå:** `productId` (string) - ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
- **‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô:** `string` - URL ‡πÉ‡∏´‡∏°‡πà

#### `convertLazadaUrl(originalUrl)`
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÅ‡∏õ‡∏•‡∏á URL ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡πá‡∏ô URL ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏±‡πâ‡∏ô
- **‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå:** `originalUrl` (string) - URL ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á Lazada
- **‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô:** `string` - URL ‡πÉ‡∏´‡∏°‡πà ‡∏´‡∏£‡∏∑‡∏≠ `null` ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏î‡πâ

#### `shortenLazadaUrl(lazadaUrl)`
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏¢‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå Lazada ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ API ‡∏Ç‡∏≠‡∏á getlink-lazada.lslly.com
- **‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå:** `lazadaUrl` (string) - URL ‡∏Ç‡∏≠‡∏á Lazada ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠
- **‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô:** `Promise<Object>` - ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå

#### `processLazadaUrl(originalUrl)`
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• URL ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£ (‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ + ‡∏¢‡πà‡∏≠‡∏•‡∏¥‡∏á‡∏Å‡πå)
- **‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå:** `originalUrl` (string) - URL ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á Lazada
- **‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô:** `Promise<Object>` - ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£

## üéØ ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö URL ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö

1. **‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°:** `/products/‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤-i{productId}-s{skuId}.html`
2. **‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏±‡πâ‡∏ô:** `/i{productId}.html`

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå

```
‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥/
‚îú‚îÄ‚îÄ lazada-url-parser.js      # ‡πÑ‡∏ü‡∏•‡πå JavaScript ‡∏´‡∏•‡∏±‡∏Å
‚îú‚îÄ‚îÄ server.js                 # Express API server
‚îú‚îÄ‚îÄ package.json              # Node.js dependencies
‚îú‚îÄ‚îÄ captain-definition        # CapRover configuration
‚îú‚îÄ‚îÄ Dockerfile                # Docker configuration
‚îú‚îÄ‚îÄ .dockerignore             # Docker ignore files
‚îú‚îÄ‚îÄ .env                      # Environment variables
‚îú‚îÄ‚îÄ .gitignore                # Git ignore files
‚îú‚îÄ‚îÄ test-lazada-parser.html   # ‡πÑ‡∏ü‡∏•‡πå HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
‚îî‚îÄ‚îÄ README.md                 # ‡πÑ‡∏ü‡∏•‡πå‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
```

## üõ†Ô∏è ‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤

‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏±‡πä‡∏Å ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå `lazada-url-parser.js`

## üìÑ License

MIT License - ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏¥‡∏™‡∏£‡∏∞ 
